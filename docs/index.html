<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generated results</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" integrity="sha384-uWxY/CJNBR+1zjPWmfnSnVxwRheevXITnMqoEIeG1LJrdI0GlVs/9cVSyPYXdcSF" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/fontawesome.min.css" integrity="sha384-jLKHWM3JRmfMU0A5x5AkjWkw/EYfGUAGagvnfryNV3F9VqM98XiIH7VBGVoxVSc7" crossorigin="anonymous">
    <link rel="stylesheet" href="index.css">
</head>

<body>
    <div class="container-fluid">
        <div class="row">
            <nav id="sidebar_menu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
              <div class="position-sticky pt-3" id="navigation"></div>
            </nav>
            <div class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <iframe name="my_frame" id="frame" ></iframe>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/js/bootstrap.min.js" integrity="sha384-PsUw7Xwds7x08Ew3exXhqzbhuEYmA2xnwc8BuD6SEr+UmEHlX8/MCltYEodzWA4u" crossorigin="anonymous"></script>
    <script>
        const data = {
            'PETR4_petrobras': {
                'title': "PETR4 - 'petrobras' using Lava Jato's operation data",
                'items': [
                    '2014-01-01_2014-12-31',
                    '2015-01-01_2015-12-31',
                    '2016-01-01_2016-12-31',
                    '2017-01-01_2017-12-31',
                    '2018-01-01_2018-12-31',
                    '2019-01-01_2019-12-31',
                    '2020-01-01_2020-12-31',
                    '2021-01-01_2021-12-31'
                ],
            },
            'VALE3_brumadinho': {
                'title': "VALE3 - 'brumadinho'",
                'items': [
                    '2019-01-01_2019-01-31'
                ],
            },
            'VALE3_mariana': {
                'title': 'VALE3 - "mariana"',
                'items': [
                    '2015-10-01_2015-11-30'
                ]
            }
        }
        const timeframes = ['D1', 'H1', 'M30', 'M15', 'M1']
        let menu_i = 0
        let sidebar_html = ''
        for (const tick_query in data){
            sidebar_html += `
                <h5 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                  <span>${data[tick_query].title}</span>
                </h5>
            `
            for (const index in data[tick_query].items){
                const date_init_and_date_end = data[tick_query].items[index]
                sidebar_html+= `
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1">
                        <a href="#" onclick="openClose('#menu_${menu_i}')">from ${date_init_and_date_end.split('_').join(' until ')}</a>
                    </h6>
                    <ul class="nav flex-column mb-2" style="display: none" id="menu_${menu_i}">`
                        for (const timeframe of timeframes) {
                            sidebar_html += `
                                <li class="nav-item">
                                    <a class="nav-link" href="${tick_query}/${date_init_and_date_end}/${timeframe}/plot.html" target="my_frame">Timeframe ${timeframe}</a>
                                </li>`
                        }
                sidebar_html+= `</ul>`
                menu_i++;
            }
        }
        document.querySelector('#navigation').insertAdjacentHTML('beforeend', sidebar_html)

        function openClose(ref) {
            const elem = document.querySelector(ref)
            if (elem.style.display == 'none') {
                elem.style.display = 'block'
            } else {
                elem.style.display = 'none'
            }
        }

    </script>
</body>

</html>